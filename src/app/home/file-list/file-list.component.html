<app-directory-breadcrumb />
@if (files.pathFileTree.length) {
    <section class="bg-white px-10 max-h-[calc(100vh_-_3rem_-_4rem_-_4.25rem)] overflow-auto py-6 rounded-lg grid grid-cols-[2rem_minmax(16.666%,_max-content)_10%_auto] gap-4">
            <div></div>
            <div
                class="min-w-52 font-semibold group underline-offset-2 cursor-pointer"
                [title]="
                    currentSort.sortBy == 'name' ?
                    'Sortuj po nazwie (' + (currentSort.order == 'ASC' ? 'A-Z' : 'Z-A') + ')' :
                    ''
                "
            >
                <button (click)="sort('name')">
                    <span class="group-hover:underline pr-1.5">Nazwa</span>
                    @if (currentSort.sortBy == 'name') {
                        <fa-icon [icon]="faArrow" />
                    }
                </button>
            </div>
            <div
                class="font-semibold group underline-offset-2 cursor-pointer"
                [title]="
                    currentSort.sortBy == 'date' ?
                    'Sortuj po dacie ' + (currentSort.order == 'ASC' ? 'od najstarszej do najnowszej' : 'od najnowszej do najstarszej') :
                    ''
                "
            >
                <button (click)="sort('date')">
                    <span class="group-hover:underline pr-1.5">Data</span>
                    @if (currentSort.sortBy == 'date') {
                        <fa-icon [icon]="faArrow" />
                    }
                </button>
            </div>
            <div
                class="font-semibold group underline-offset-2 cursor-pointer"
                [title]="
                    currentSort.sortBy == 'size' ?
                    'Sortuj po rozmiarze ' + (currentSort.order == 'ASC' ? 'od najmniejszego do największego' : 'od największego do najmniejszego') :
                    ''
                "
            >
                <button (click)="sort('size')">
                    <span class="group-hover:underline pr-1.5">Rozmiar pliku</span>
                    @if (currentSort.sortBy == 'size') {
                        <fa-icon [icon]="faArrow" />
                    }
                </button>
            </div>

        @for (file of files.pathFileTree; track $index) {

            @if (file.type == 'file' && !files.isLoading) {

                <div class="pl-0.5">
                    <fa-icon
                        [icon]="files.getIcon(file.name.split('.')[file.name.split('.').length - 1].toLowerCase())"
                        size="lg"
                        class="text-slate-600"
                    />
                </div>
                <div class="pl-0.5">{{file.name}}</div>
                <div class="pl-0.5">{{file.date | date:'shortDate'}}</div>
                <div class="pl-0.5">{{file.size! | memoryUnit}}</div>
            } @else if (!files.isLoading) {

                <div class="pl-0.5">
                    <fa-icon [icon]="faFolder" size="lg" class="text-amber-300" />
                </div>
                <div
                    class="pl-0.5 cursor-pointer hover:underline underline-offset-2 select-none h-6"
                    (click)="files.changeLocation(files.path + '/' + file.name)"
                >
                    {{file.name}}
                </div>
                <div class="pl-0.5">
                    {{getLatestChangeDate(file) | date:'shortDate'}}
                </div>
                <div class="pl-0.5">
                  {{file.size! | memoryUnit}}
                </div>

            }

            @if (!$last) {
                <hr class="col-span-full" />
            }

        }

    </section>
} @else if (!files.isLoading) {
    <div class="h-[70vh] flex flex-col justify-center items-center gap-8 text-slate-800 text-2xl font-medium">
        <fa-icon [icon]="faFolderOpen" class="text-sky-300 -rotate-12" size="6x"/>
        Ten folder jest pusty
        <!-- TODO przycisk przesyłania plików -->
    </div>
}
